const menuBtn=document.querySelector(".menu-btn"),menu=document.querySelector(".menu"),overlay=document.querySelector(".overlay");function showFuncs(){document.getElementById("funcs-drp").classList.toggle("show")}menuBtn&&menuBtn.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")});var fieldEl=document.getElementById("filter-field"),valueEl=document.getElementById("filter-value");function updateFilter(){var e=fieldEl.options[fieldEl.selectedIndex].value,t="function"==e?customFilter:e;valueEl.disabled="function"==e,e&&table.setFilter(t,"like",valueEl.value)}document.getElementById("filter-field").addEventListener("change",updateFilter),document.getElementById("filter-value").addEventListener("keyup",updateFilter),document.getElementById("filter-clear").addEventListener("click",function(){fieldEl.value="",valueEl.value="",table.clearFilter()}),overlay&&overlay.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")});const printIcon=function(e,t,i){return"<div class='icon__delete' >&#10008</div>"},printIconView=function(e,t,i){return"<div class='qrcode-container'><img src='static/images/icons/qrcode.svg' class='qrcode-icon' ></img></div>"};document.getElementById("products-table")&&(table=new Tabulator("#products-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/product_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_product?id="+t.getRow().getData().id)}},{title:"Product name",field:"name",hozAlign:"left"},{title:"Comment",field:"comment"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_product?id="+t.getData().id}})),document.getElementById("users-table")&&(table=new Tabulator("#users-table",{responsiveLayout:"collapse",pagination:"local",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/user_list`,columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_user/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:360},{title:"Email",field:"email",minWidth:160},{title:"Activated",field:"activated",minWidth:160},{title:"Role",field:"role",minWidth:160},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:160}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_user/"+t.getData().id}})),document.getElementById("sub_resellers-table")&&(table=new Tabulator("#sub_resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/sub_reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_sub_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_sub_reseller/"+t.getData().id}})),document.getElementById("resellers-table")&&(table=new Tabulator("#resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_reseller/"+t.getData().id}})),document.getElementById("distributors-table")&&(table=new Tabulator("#distributors-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/distributor_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_distributor/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_distributor/"+t.getData().id}})),document.getElementById("accounts-table")&&(table=new Tabulator("#accounts-table",{resizableColumns:!1,responsiveLayout:"collapse",pagination:"local",layout:"fitColumns",ajaxURL:window.location.origin+"/api/account_list",paginationSize:20,columns:[{title:"Id",field:"id"},{title:"Ecc id",field:"ecc_id",widthGrow:3},{title:"Sim",field:"sim",width:0},{field:"actions",formatter:printIconView,widthGrow:1,headerSort:!1,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),window.location.href=window.location.origin+"/qrcode/"+t.getRow().getData().id}},{field:"actions",formatter:printIcon,widthGrow:1,hozAlign:"center",headerSort:!1,cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_account/"+t.getRow().getData().id)}}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_account/"+t.getData().id}})),document.getElementById("supports-table")&&(table=new Tabulator("#supports-table",{responsiveLayout:"collapse",pagination:"remote",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/support_list`,paginationDataReceived:{last_page:"max_pages"},columns:[{formatter:"responsiveCollapse",width:30,minWidth:30,align:"center",resizable:!1,headerSort:!1},{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_support/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:166},{title:"Email",field:"email",minWidth:166},{title:"Activated",field:"activated",minWidth:166},{title:"Role",field:"role",minWidth:166},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:166}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_support/"+t.getData().id}}));const closeBtn=document.getElementById("close-btn");closeBtn&&closeBtn.addEventListener("click",function(e){document.getElementById("alert").hidden=!0}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".edit__form");if(e){const t=document.querySelector("#gif");t&&e.addEventListener("submit",function(){t.style.visibility="visible",t.style.height="100%",document.querySelectorAll(".btn-container").forEach(function(e){e.remove()})})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhY2NvdW50LmpzIl0sIm5hbWVzIjpbIm1lbnVCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtZW51Iiwib3ZlcmxheSIsInNob3dGdW5jcyIsImdldEVsZW1lbnRCeUlkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZpZWxkRWwiLCJ2YWx1ZUVsIiwidXBkYXRlRmlsdGVyIiwiZmlsdGVyVmFsIiwib3B0aW9ucyIsInNlbGVjdGVkSW5kZXgiLCJ2YWx1ZSIsImZpbHRlciIsImN1c3RvbUZpbHRlciIsImRpc2FibGVkIiwidGFibGUiLCJzZXRGaWx0ZXIiLCJjbGVhckZpbHRlciIsInByaW50SWNvbiIsImNlbGwiLCJmb3JtYXR0ZXJQYXJhbXMiLCJvblJlbmRlcmVkIiwicHJpbnRJY29uVmlldyIsIlRhYnVsYXRvciIsImxheW91dCIsImFqYXhVUkwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsIm9yaWdpbiIsImNvbHVtbnMiLCJ0aXRsZSIsImZpZWxkIiwibWluV2lkdGgiLCJmb3JtYXR0ZXIiLCJ3aWR0aCIsImhvekFsaWduIiwiY2VsbENsaWNrIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImNvbmZpcm0iLCJnZXRSb3ciLCJnZXREYXRhIiwibmFtZSIsImhyZWYiLCJpZCIsInJvd0NsaWNrIiwicm93IiwicmVzcG9uc2l2ZUxheW91dCIsInBhZ2luYXRpb24iLCJwYWdpbmF0aW9uU2l6ZSIsImAiLCJhcGkiLCJ1c2VyX2xpc3RgIiwidXNlcm5hbWUiLCJzb3J0ZXIiLCJyZXNpemFibGVDb2x1bW5zIiwid2lkdGhHcm93IiwiaGVhZGVyU29ydCIsInN1cHBvcnRfbGlzdGAiLCJwYWdpbmF0aW9uRGF0YVJlY2VpdmVkIiwibGFzdF9wYWdlIiwiYWxpZ24iLCJyZXNpemFibGUiLCJjbG9zZUJ0biIsImhpZGRlbiIsImVkaXRGb3JtIiwiZ2lmIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiaGVpZ2h0Iiwi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bUJBQUEsV0FDQSxNQUFBNkQsRUFBQXJFLFNBQUFDLGNBQUEsZUFDQSxHQUFBb0UsRUFBQSxDQUNBLE1BQUFDLEVBQUF0RSxTQUFBQyxjQUFBLFFBQ0FxRSxHQUNBRCxFQUFBN0QsaUJBQUEsU0FBQSxXQUNBOEQsRUFBQUMsTUFBQUMsV0FBQSxVQUNBRixFQUFBQyxNQUFBRSxPQUFBLE9BQ0F6RSxTQUFBMEUsaUJBQUEsa0JBQUFDLFFBQUEsU0FBQUMsR0FDQUEsRUFBQUMiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtZW51QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWJ0blwiKTtcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnVcIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xuXG5tZW51QnRuICYmXG4gIG1lbnVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBtZW51QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJtZW51LWJ0bi0tYWN0aXZlXCIpO1xuICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnUtLWFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJvdmVybGF5LS1hY3RpdmVcIik7XG4gIH0pO1xuXG5mdW5jdGlvbiBzaG93RnVuY3MoKSB7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnVuY3MtZHJwXCIpLmNsYXNzTGlzdC50b2dnbGUoXCJzaG93XCIpO1xufVxuXG4vL0RlZmluZSB2YXJpYWJsZXMgZm9yIGlucHV0IGVsZW1lbnRzXG52YXIgZmllbGRFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsdGVyLWZpZWxkXCIpO1xudmFyIHZhbHVlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpbHRlci12YWx1ZVwiKTtcblxuLy9UcmlnZ2VyIHNldEZpbHRlciBmdW5jdGlvbiB3aXRoIGNvcnJlY3QgcGFyYW1ldGVyc1xuZnVuY3Rpb24gdXBkYXRlRmlsdGVyKCl7XG4gIHZhciBmaWx0ZXJWYWwgPSBmaWVsZEVsLm9wdGlvbnNbZmllbGRFbC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgdmFyIHR5cGVWYWwgPSAnbGlrZSdcblxuICB2YXIgZmlsdGVyID0gZmlsdGVyVmFsID09IFwiZnVuY3Rpb25cIiA/IGN1c3RvbUZpbHRlciA6IGZpbHRlclZhbDtcblxuICBpZihmaWx0ZXJWYWwgPT0gXCJmdW5jdGlvblwiICl7XG4gICAgdmFsdWVFbC5kaXNhYmxlZCA9IHRydWU7XG4gIH1lbHNle1xuICAgIHZhbHVlRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGlmKGZpbHRlclZhbCl7XG4gICAgdGFibGUuc2V0RmlsdGVyKGZpbHRlcix0eXBlVmFsLCB2YWx1ZUVsLnZhbHVlKTtcbiAgfVxufVxuXG4vL1VwZGF0ZSBmaWx0ZXJzIG9uIHZhbHVlIGNoYW5nZVxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXItZmllbGRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB1cGRhdGVGaWx0ZXIpO1xuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaWx0ZXItdmFsdWVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHVwZGF0ZUZpbHRlcik7XG5cbi8vQ2xlYXIgZmlsdGVycyBvbiBcIkNsZWFyIEZpbHRlcnNcIiBidXR0b24gY2xpY2tcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmlsdGVyLWNsZWFyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuICBmaWVsZEVsLnZhbHVlID0gXCJcIjtcbiAgdmFsdWVFbC52YWx1ZSA9IFwiXCI7XG5cbiAgdGFibGUuY2xlYXJGaWx0ZXIoKTtcbn0pO1xuXG5vdmVybGF5ICYmXG4gIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcbiAgICBtZW51QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJtZW51LWJ0bi0tYWN0aXZlXCIpO1xuICAgIG1lbnUuY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnUtLWFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJvdmVybGF5LS1hY3RpdmVcIik7XG4gIH0pO1xuY29uc3QgcHJpbnRJY29uID0gZnVuY3Rpb24gKGNlbGwsIGZvcm1hdHRlclBhcmFtcywgb25SZW5kZXJlZCkge1xuICAvL3BsYWluIHRleHQgdmFsdWVcbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz0naWNvbl9fZGVsZXRlJyA+JiMxMDAwODwvZGl2PlwiO1xufTtcbmNvbnN0IHByaW50SWNvblZpZXcgPSBmdW5jdGlvbiAoY2VsbCwgZm9ybWF0dGVyUGFyYW1zLCBvblJlbmRlcmVkKSB7XG4gIC8vcGxhaW4gdGV4dCB2YWx1ZVxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPSdxcmNvZGUtY29udGFpbmVyJz48aW1nIHNyYz0nc3RhdGljL2ltYWdlcy9pY29ucy9xcmNvZGUuc3ZnJyBjbGFzcz0ncXJjb2RlLWljb24nID48L2ltZz48L2Rpdj5cIjtcbn07XG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9kdWN0cy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjcHJvZHVjdHMtdGFibGVcIiwge1xuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9hcGkvcHJvZHVjdF9saXN0XCIsXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICsgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkubmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX3Byb2R1Y3Q/aWQ9XCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiUHJvZHVjdCBuYW1lXCIsIGZpZWxkOiBcIm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkNvbW1lbnRcIiwgZmllbGQ6IFwiY29tbWVudFwiIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9wcm9kdWN0P2lkPVwiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcnMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI3VzZXJzLXRhYmxlXCIsIHtcbiAgICByZXNwb25zaXZlTGF5b3V0OiBcImNvbGxhcHNlXCIsXG4gICAgcGFnaW5hdGlvbjogXCJsb2NhbFwiLCAvL2VuYWJsZSByZW1vdGUgcGFnaW5hdGlvblxuICAgIHBhZ2luYXRpb25TaXplOiAyMCwgLy9vcHRpb25hbCBwYXJhbWV0ZXIgdG8gcmVxdWVzdCBhIGNlcnRhaW4gbnVtYmVyIG9mIHJvd3MgcGVyIHBhZ2VcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgYC9hcGkvdXNlcl9saXN0YCxcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnVzZXJuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfdXNlci9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJVc2VybmFtZVwiLCBmaWVsZDogXCJ1c2VybmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIsIG1pbldpZHRoOiAzNjAgfSxcbiAgICAgIHsgdGl0bGU6IFwiRW1haWxcIiwgZmllbGQ6IFwiZW1haWxcIiwgbWluV2lkdGg6IDE2MCB9LFxuICAgICAgeyB0aXRsZTogXCJBY3RpdmF0ZWRcIiwgZmllbGQ6IFwiYWN0aXZhdGVkXCIsIG1pbldpZHRoOiAxNjAgfSxcbiAgICAgIHsgdGl0bGU6IFwiUm9sZVwiLCBmaWVsZDogXCJyb2xlXCIsIG1pbldpZHRoOiAxNjAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiQ3JlYXRlZFwiLFxuICAgICAgICBmaWVsZDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHNvcnRlcjogXCJkYXRlXCIsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBtaW5XaWR0aDogMTYwLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X3VzZXIvXCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3ViX3Jlc2VsbGVycy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjc3ViX3Jlc2VsbGVycy10YWJsZVwiLCB7XG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2FwaS9zdWJfcmVzZWxsZXJfbGlzdFwiLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArXG4gICAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkudXNlcm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9zdWJfcmVzZWxsZXIvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiVXNlcm5hbWVcIiwgZmllbGQ6IFwidXNlcm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkVtYWlsXCIsIGZpZWxkOiBcImVtYWlsXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiQWN0aXZhdGVkXCIsIGZpZWxkOiBcImFjdGl2YXRlZFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIlJvbGVcIiwgZmllbGQ6IFwicm9sZVwiIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZWRcIixcbiAgICAgICAgZmllbGQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBzb3J0ZXI6IFwiZGF0ZVwiLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9zdWJfcmVzZWxsZXIvXCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNlbGxlcnMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI3Jlc2VsbGVycy10YWJsZVwiLCB7XG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2FwaS9yZXNlbGxlcl9saXN0XCIsXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS51c2VybmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX3Jlc2VsbGVyL1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlVzZXJuYW1lXCIsIGZpZWxkOiBcInVzZXJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJFbWFpbFwiLCBmaWVsZDogXCJlbWFpbFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkFjdGl2YXRlZFwiLCBmaWVsZDogXCJhY3RpdmF0ZWRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJSb2xlXCIsIGZpZWxkOiBcInJvbGVcIiB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJDcmVhdGVkXCIsXG4gICAgICAgIGZpZWxkOiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgc29ydGVyOiBcImRhdGVcIixcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfcmVzZWxsZXIvXCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzdHJpYnV0b3JzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNkaXN0cmlidXRvcnMtdGFibGVcIiwge1xuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9hcGkvZGlzdHJpYnV0b3JfbGlzdFwiLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArXG4gICAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkudXNlcm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9kaXN0cmlidXRvci9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJVc2VybmFtZVwiLCBmaWVsZDogXCJ1c2VybmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiRW1haWxcIiwgZmllbGQ6IFwiZW1haWxcIiB9LFxuICAgICAgeyB0aXRsZTogXCJBY3RpdmF0ZWRcIiwgZmllbGQ6IFwiYWN0aXZhdGVkXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiUm9sZVwiLCBmaWVsZDogXCJyb2xlXCIgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiQ3JlYXRlZFwiLFxuICAgICAgICBmaWVsZDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHNvcnRlcjogXCJkYXRlXCIsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X2Rpc3RyaWJ1dG9yL1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjb3VudHMtdGFibGVcIikpIHtcbiAgICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjYWNjb3VudHMtdGFibGVcIiwge1xuICAgICAgcmVzaXphYmxlQ29sdW1uczogZmFsc2UsXG4gICAgICByZXNwb25zaXZlTGF5b3V0OiBcImNvbGxhcHNlXCIsXG4gICAgICBwYWdpbmF0aW9uOiBcImxvY2FsXCIsIC8vZW5hYmxlIHJlbW90ZSBwYWdpbmF0aW9uXG4gICAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLFxuICAgICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2FwaS9hY2NvdW50X2xpc3RcIixcbiAgICAgIHBhZ2luYXRpb25TaXplOiAyMCwgLy9vcHRpb25hbCBwYXJhbWV0ZXIgdG8gcmVxdWVzdCBhIGNlcnRhaW4gbnVtYmVyIG9mIHJvd3MgcGVyIHBhZ2VcblxuICAgICAgY29sdW1uczogW1xuICAgICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgICAgeyB0aXRsZTogXCJFY2MgaWRcIiwgZmllbGQ6IFwiZWNjX2lkXCIsIHdpZHRoR3JvdzogMyB9LFxuICAgICAgICB7IHRpdGxlOiBcIlNpbVwiLCBmaWVsZDogXCJzaW1cIiwgd2lkdGg6IDAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvblZpZXcsXG4gICAgICAgICAgd2lkdGhHcm93OiAxLFxuICAgICAgICAgIGhlYWRlclNvcnQ6IGZhbHNlLFxuICAgICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9xcmNvZGUvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgICAgd2lkdGhHcm93OiAxLFxuICAgICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIGhlYWRlclNvcnQ6IGZhbHNlLFxuICAgICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICsgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkubmFtZVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICAgIFwiL2RlbGV0ZV9hY2NvdW50L1wiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfYWNjb3VudC9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgICB9LFxuICAgIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdXBwb3J0cy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjc3VwcG9ydHMtdGFibGVcIiwge1xuICAgIHJlc3BvbnNpdmVMYXlvdXQ6IFwiY29sbGFwc2VcIixcbiAgICBwYWdpbmF0aW9uOiBcInJlbW90ZVwiLCAvL2VuYWJsZSByZW1vdGUgcGFnaW5hdGlvblxuICAgIHBhZ2luYXRpb25TaXplOiAyMCwgLy9vcHRpb25hbCBwYXJhbWV0ZXIgdG8gcmVxdWVzdCBhIGNlcnRhaW4gbnVtYmVyIG9mIHJvd3MgcGVyIHBhZ2VcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgYC9hcGkvc3VwcG9ydF9saXN0YCxcbiAgICBwYWdpbmF0aW9uRGF0YVJlY2VpdmVkOiB7XG4gICAgICBsYXN0X3BhZ2U6IFwibWF4X3BhZ2VzXCIsIC8vY2hhbmdlIGxhc3RfcGFnZSBwYXJhbWV0ZXIgbmFtZSB0byBcIm1heF9wYWdlc1wiXG4gICAgfSxcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7XG4gICAgICAgIGZvcm1hdHRlcjogXCJyZXNwb25zaXZlQ29sbGFwc2VcIixcbiAgICAgICAgd2lkdGg6IDMwLFxuICAgICAgICBtaW5XaWR0aDogMzAsXG4gICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICBoZWFkZXJTb3J0OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnVzZXJuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfc3VwcG9ydC9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJVc2VybmFtZVwiLCBmaWVsZDogXCJ1c2VybmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIsIG1pbldpZHRoOiAxNjYgfSxcbiAgICAgIHsgdGl0bGU6IFwiRW1haWxcIiwgZmllbGQ6IFwiZW1haWxcIiwgbWluV2lkdGg6IDE2NiB9LFxuICAgICAgeyB0aXRsZTogXCJBY3RpdmF0ZWRcIiwgZmllbGQ6IFwiYWN0aXZhdGVkXCIsIG1pbldpZHRoOiAxNjYgfSxcbiAgICAgIHsgdGl0bGU6IFwiUm9sZVwiLCBmaWVsZDogXCJyb2xlXCIsIG1pbldpZHRoOiAxNjYgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiQ3JlYXRlZFwiLFxuICAgICAgICBmaWVsZDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHNvcnRlcjogXCJkYXRlXCIsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBtaW5XaWR0aDogMTY2LFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X3N1cHBvcnQvXCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuXG5jb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9zZS1idG4nKTtcbmlmKGNsb3NlQnRuKSB7XG4gIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhbGVydCcpLmhpZGRlbiA9IHRydWU7XG4gIH0pO1xufVxuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fZm9ybScpO1xuICBpZiAoZWRpdEZvcm0pIHtcbiAgICBjb25zdCBnaWYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2lmJyk7XG4gICAgaWYoZ2lmKSB7XG4gICAgICBlZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbigpe1xuICAgICAgICBnaWYuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgZ2lmLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idG4tY29udGFpbmVyXCIpLmZvckVhY2goZnVuY3Rpb24oYnRuKSB7XG4gICAgICAgICAgYnRuLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG4iXX0=
