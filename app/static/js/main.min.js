const menuBtn=document.querySelector(".menu-btn"),menu=document.querySelector(".menu"),overlay=document.querySelector(".overlay");function showFuncs(){document.getElementById("funcs-drp").classList.toggle("show")}menuBtn&&menuBtn.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")}),overlay&&overlay.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")});const printIcon=function(e,t,i){return"<div class='icon__delete' >&#10008</div>"},printIconView=function(e,t,i){return"<div class='qrcode-container'><img src='static/images/icons/qrcode.svg' class='qrcode-icon' ></img></div>"};document.getElementById("products-table")&&(table=new Tabulator("#products-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/product_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_product?id="+t.getRow().getData().id)}},{title:"Product name",field:"name",hozAlign:"left"},{title:"Comment",field:"comment"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_product?id="+t.getData().id}})),document.getElementById("users-table")&&(table=new Tabulator("#users-table",{responsiveLayout:"collapse",pagination:"local",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/user_list`,columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_user/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:360},{title:"Email",field:"email",minWidth:160},{title:"Activated",field:"activated",minWidth:160},{title:"Role",field:"role",minWidth:160},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:160}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_user/"+t.getData().id}})),document.getElementById("sub_resellers-table")&&(table=new Tabulator("#sub_resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/sub_reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_sub_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_sub_reseller/"+t.getData().id}})),document.getElementById("resellers-table")&&(table=new Tabulator("#resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_reseller/"+t.getData().id}})),document.getElementById("distributors-table")&&(table=new Tabulator("#distributors-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/distributor_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_distributor/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_distributor/"+t.getData().id}})),document.getElementById("accounts-table")&&(table=new Tabulator("#accounts-table",{resizableColumns:!1,responsiveLayout:"collapse",pagination:"local",layout:"fitColumns",ajaxURL:window.location.origin+"/api/account_list",paginationSize:20,columns:[{title:"Id",field:"id"},{title:"Ecc id",field:"ecc_id",widthGrow:3},{field:"actions",formatter:printIconView,widthGrow:1,headerSort:!1,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),window.location.href=window.location.origin+"/qrcode/"+t.getRow().getData().id}},{field:"actions",formatter:printIcon,widthGrow:1,hozAlign:"center",headerSort:!1,cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_account/"+t.getRow().getData().id)}}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_account/"+t.getData().id}})),document.getElementById("supports-table")&&(table=new Tabulator("#supports-table",{responsiveLayout:"collapse",pagination:"remote",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/support_list`,paginationDataReceived:{last_page:"max_pages"},columns:[{formatter:"responsiveCollapse",width:30,minWidth:30,align:"center",resizable:!1,headerSort:!1},{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_support/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:166},{title:"Email",field:"email",minWidth:166},{title:"Activated",field:"activated",minWidth:166},{title:"Role",field:"role",minWidth:166},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:166}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_support/"+t.getData().id}}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWVudUJ0biIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm1lbnUiLCJvdmVybGF5Iiwic2hvd0Z1bmNzIiwiZ2V0RWxlbWVudEJ5SWQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJhZGRFdmVudExpc3RlbmVyIiwicHJpbnRJY29uIiwiY2VsbCIsImZvcm1hdHRlclBhcmFtcyIsIm9uUmVuZGVyZWQiLCJwcmludEljb25WaWV3IiwidGFibGUiLCJUYWJ1bGF0b3IiLCJsYXlvdXQiLCJhamF4VVJMIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJjb2x1bW5zIiwidGl0bGUiLCJmaWVsZCIsIm1pbldpZHRoIiwiZm9ybWF0dGVyIiwid2lkdGgiLCJob3pBbGlnbiIsImNlbGxDbGljayIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJjb25maXJtIiwiZ2V0Um93IiwiZ2V0RGF0YSIsIm5hbWUiLCJocmVmIiwiaWQiLCJyb3dDbGljayIsInJvdyIsInJlc3BvbnNpdmVMYXlvdXQiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvblNpemUiLCJgIiwiYXBpIiwidXNlcl9saXN0YCIsInVzZXJuYW1lIiwic29ydGVyIiwicmVzaXphYmxlQ29sdW1ucyIsIndpZHRoR3JvdyIsImhlYWRlclNvcnQiLCJzdXBwb3J0X2xpc3RgIiwicGFnaW5hdGlvbkRhdGFSZWNlaXZlZCIsImxhc3RfcGFnZSIsImFsaWduIiwicmVzaXphYmxlIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFBQSxRQUFBQyxTQUFBQyxjQUFBLGFBQ0FDLEtBQUFGLFNBQUFDLGNBQUEsU0FDQUUsUUFBQUgsU0FBQUMsY0FBQSxZQVNBLFNBQUFHLFlBQ0FKLFNBQUFLLGVBQUEsYUFBQUMsVUFBQUMsT0FBQSxRQVJBUixTQUNBQSxRQUFBUyxpQkFBQSxRQUFBLFdBQ0FULFFBQUFPLFVBQUFDLE9BQUEsb0JBQ0FMLEtBQUFJLFVBQUFDLE9BQUEsZ0JBQ0FKLFFBQUFHLFVB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Q0FDLE1BQUEsYUFDQXVCLE9BQUEsT0FDQW5CLFNBQUEsU0FDQUgsU0FBQSxNQUdBYSxTQUFBLFNBQUFSLEVBQUFTLEdBQ0FwQixPQUFBQyxTQUFBZ0IsS0FDQWpCLE9BQUFDLFNBQUFDLE9BQUEsaUJBQUFrQixFQUFBTCxVQUFBRyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1lbnVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtYnRuXCIpO1xuY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudVwiKTtcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XG5cbm1lbnVCdG4gJiZcbiAgbWVudUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIG1lbnVCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnUtYnRuLS1hY3RpdmVcIik7XG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwibWVudS0tYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShcIm92ZXJsYXktLWFjdGl2ZVwiKTtcbiAgfSk7XG5cbmZ1bmN0aW9uIHNob3dGdW5jcygpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmdW5jcy1kcnBcIikuY2xhc3NMaXN0LnRvZ2dsZShcInNob3dcIik7XG59XG5cbm92ZXJsYXkgJiZcbiAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgIG1lbnVCdG4uY2xhc3NMaXN0LnRvZ2dsZShcIm1lbnUtYnRuLS1hY3RpdmVcIik7XG4gICAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKFwibWVudS0tYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShcIm92ZXJsYXktLWFjdGl2ZVwiKTtcbiAgfSk7XG5jb25zdCBwcmludEljb24gPSBmdW5jdGlvbiAoY2VsbCwgZm9ybWF0dGVyUGFyYW1zLCBvblJlbmRlcmVkKSB7XG4gIC8vcGxhaW4gdGV4dCB2YWx1ZVxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPSdpY29uX19kZWxldGUnID4mIzEwMDA4PC9kaXY+XCI7XG59O1xuY29uc3QgcHJpbnRJY29uVmlldyA9IGZ1bmN0aW9uIChjZWxsLCBmb3JtYXR0ZXJQYXJhbXMsIG9uUmVuZGVyZWQpIHtcbiAgLy9wbGFpbiB0ZXh0IHZhbHVlXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9J3FyY29kZS1jb250YWluZXInPjxpbWcgc3JjPSdzdGF0aWMvaW1hZ2VzL2ljb25zL3FyY29kZS5zdmcnIGNsYXNzPSdxcmNvZGUtaWNvbicgPjwvaW1nPjwvZGl2PlwiO1xufTtcbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2R1Y3RzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNwcm9kdWN0cy10YWJsZVwiLCB7XG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2FwaS9wcm9kdWN0X2xpc3RcIixcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgKyBjZWxsLmdldFJvdygpLmdldERhdGEoKS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfcHJvZHVjdD9pZD1cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJQcm9kdWN0IG5hbWVcIiwgZmllbGQ6IFwibmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiQ29tbWVudFwiLCBmaWVsZDogXCJjb21tZW50XCIgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X3Byb2R1Y3Q/aWQ9XCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2Vycy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjdXNlcnMtdGFibGVcIiwge1xuICAgIHJlc3BvbnNpdmVMYXlvdXQ6IFwiY29sbGFwc2VcIixcbiAgICBwYWdpbmF0aW9uOiBcImxvY2FsXCIsIC8vZW5hYmxlIHJlbW90ZSBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvblNpemU6IDIwLCAvL29wdGlvbmFsIHBhcmFtZXRlciB0byByZXF1ZXN0IGEgY2VydGFpbiBudW1iZXIgb2Ygcm93cyBwZXIgcGFnZVxuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBgL2FwaS91c2VyX2xpc3RgLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArXG4gICAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkudXNlcm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV91c2VyL1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlVzZXJuYW1lXCIsIGZpZWxkOiBcInVzZXJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiwgbWluV2lkdGg6IDM2MCB9LFxuICAgICAgeyB0aXRsZTogXCJFbWFpbFwiLCBmaWVsZDogXCJlbWFpbFwiLCBtaW5XaWR0aDogMTYwIH0sXG4gICAgICB7IHRpdGxlOiBcIkFjdGl2YXRlZFwiLCBmaWVsZDogXCJhY3RpdmF0ZWRcIiwgbWluV2lkdGg6IDE2MCB9LFxuICAgICAgeyB0aXRsZTogXCJSb2xlXCIsIGZpZWxkOiBcInJvbGVcIiwgbWluV2lkdGg6IDE2MCB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJDcmVhdGVkXCIsXG4gICAgICAgIGZpZWxkOiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgc29ydGVyOiBcImRhdGVcIixcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIG1pbldpZHRoOiAxNjAsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfdXNlci9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJfcmVzZWxsZXJzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNzdWJfcmVzZWxsZXJzLXRhYmxlXCIsIHtcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvYXBpL3N1Yl9yZXNlbGxlcl9saXN0XCIsXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS51c2VybmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX3N1Yl9yZXNlbGxlci9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJVc2VybmFtZVwiLCBmaWVsZDogXCJ1c2VybmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiRW1haWxcIiwgZmllbGQ6IFwiZW1haWxcIiB9LFxuICAgICAgeyB0aXRsZTogXCJBY3RpdmF0ZWRcIiwgZmllbGQ6IFwiYWN0aXZhdGVkXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiUm9sZVwiLCBmaWVsZDogXCJyb2xlXCIgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiQ3JlYXRlZFwiLFxuICAgICAgICBmaWVsZDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHNvcnRlcjogXCJkYXRlXCIsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X3N1Yl9yZXNlbGxlci9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc2VsbGVycy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjcmVzZWxsZXJzLXRhYmxlXCIsIHtcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvYXBpL3Jlc2VsbGVyX2xpc3RcIixcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnVzZXJuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfcmVzZWxsZXIvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiVXNlcm5hbWVcIiwgZmllbGQ6IFwidXNlcm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkVtYWlsXCIsIGZpZWxkOiBcImVtYWlsXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiQWN0aXZhdGVkXCIsIGZpZWxkOiBcImFjdGl2YXRlZFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIlJvbGVcIiwgZmllbGQ6IFwicm9sZVwiIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZWRcIixcbiAgICAgICAgZmllbGQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBzb3J0ZXI6IFwiZGF0ZVwiLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9yZXNlbGxlci9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXN0cmlidXRvcnMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI2Rpc3RyaWJ1dG9ycy10YWJsZVwiLCB7XG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2FwaS9kaXN0cmlidXRvcl9saXN0XCIsXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS51c2VybmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX2Rpc3RyaWJ1dG9yL1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlVzZXJuYW1lXCIsIGZpZWxkOiBcInVzZXJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJFbWFpbFwiLCBmaWVsZDogXCJlbWFpbFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkFjdGl2YXRlZFwiLCBmaWVsZDogXCJhY3RpdmF0ZWRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJSb2xlXCIsIGZpZWxkOiBcInJvbGVcIiB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJDcmVhdGVkXCIsXG4gICAgICAgIGZpZWxkOiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgc29ydGVyOiBcImRhdGVcIixcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfZGlzdHJpYnV0b3IvXCIgKyByb3cuZ2V0RGF0YSgpLmlkO1xuICAgIH0sXG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY2NvdW50cy10YWJsZVwiKSkge1xuICAgIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNhY2NvdW50cy10YWJsZVwiLCB7XG4gICAgICByZXNpemFibGVDb2x1bW5zOiBmYWxzZSxcbiAgICAgIHJlc3BvbnNpdmVMYXlvdXQ6IFwiY29sbGFwc2VcIixcbiAgICAgIHBhZ2luYXRpb246IFwibG9jYWxcIiwgLy9lbmFibGUgcmVtb3RlIHBhZ2luYXRpb25cbiAgICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsXG4gICAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvYXBpL2FjY291bnRfbGlzdFwiLFxuICAgICAgcGFnaW5hdGlvblNpemU6IDIwLCAvL29wdGlvbmFsIHBhcmFtZXRlciB0byByZXF1ZXN0IGEgY2VydGFpbiBudW1iZXIgb2Ygcm93cyBwZXIgcGFnZVxuICAgICAgY29sdW1uczogW1xuICAgICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgICAgeyB0aXRsZTogXCJFY2MgaWRcIiwgZmllbGQ6IFwiZWNjX2lkXCIsIHdpZHRoR3JvdzogMyB9LFxuICAgICAgICB7XG4gICAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uVmlldyxcbiAgICAgICAgICB3aWR0aEdyb3c6IDEsXG4gICAgICAgICAgaGVhZGVyU29ydDogZmFsc2UsXG4gICAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL3FyY29kZS9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgICB3aWR0aEdyb3c6IDEsXG4gICAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgaGVhZGVyU29ydDogZmFsc2UsXG4gICAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgKyBjZWxsLmdldFJvdygpLmdldERhdGEoKS5uYW1lXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgICAgXCIvZGVsZXRlX2FjY291bnQvXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9hY2NvdW50L1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICAgIH0sXG4gICAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1cHBvcnRzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNzdXBwb3J0cy10YWJsZVwiLCB7XG4gICAgcmVzcG9uc2l2ZUxheW91dDogXCJjb2xsYXBzZVwiLFxuICAgIHBhZ2luYXRpb246IFwicmVtb3RlXCIsIC8vZW5hYmxlIHJlbW90ZSBwYWdpbmF0aW9uXG4gICAgcGFnaW5hdGlvblNpemU6IDIwLCAvL29wdGlvbmFsIHBhcmFtZXRlciB0byByZXF1ZXN0IGEgY2VydGFpbiBudW1iZXIgb2Ygcm93cyBwZXIgcGFnZVxuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBgL2FwaS9zdXBwb3J0X2xpc3RgLFxuICAgIHBhZ2luYXRpb25EYXRhUmVjZWl2ZWQ6IHtcbiAgICAgIGxhc3RfcGFnZTogXCJtYXhfcGFnZXNcIiwgLy9jaGFuZ2UgbGFzdF9wYWdlIHBhcmFtZXRlciBuYW1lIHRvIFwibWF4X3BhZ2VzXCJcbiAgICB9LFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHtcbiAgICAgICAgZm9ybWF0dGVyOiBcInJlc3BvbnNpdmVDb2xsYXBzZVwiLFxuICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgIG1pbldpZHRoOiAzMCxcbiAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgIGhlYWRlclNvcnQ6IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArXG4gICAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkudXNlcm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9zdXBwb3J0L1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlVzZXJuYW1lXCIsIGZpZWxkOiBcInVzZXJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiwgbWluV2lkdGg6IDE2NiB9LFxuICAgICAgeyB0aXRsZTogXCJFbWFpbFwiLCBmaWVsZDogXCJlbWFpbFwiLCBtaW5XaWR0aDogMTY2IH0sXG4gICAgICB7IHRpdGxlOiBcIkFjdGl2YXRlZFwiLCBmaWVsZDogXCJhY3RpdmF0ZWRcIiwgbWluV2lkdGg6IDE2NiB9LFxuICAgICAgeyB0aXRsZTogXCJSb2xlXCIsIGZpZWxkOiBcInJvbGVcIiwgbWluV2lkdGg6IDE2NiB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJDcmVhdGVkXCIsXG4gICAgICAgIGZpZWxkOiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgc29ydGVyOiBcImRhdGVcIixcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIG1pbldpZHRoOiAxNjYsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfc3VwcG9ydC9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5cbiJdfQ==
