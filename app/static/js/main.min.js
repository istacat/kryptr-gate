const menuBtn=document.querySelector(".menu-btn"),menu=document.querySelector(".menu"),overlay=document.querySelector(".overlay");function showFuncs(){document.getElementById("funcs-drp").classList.toggle("show")}menuBtn&&menuBtn.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")}),overlay&&overlay.addEventListener("click",function(){menuBtn.classList.toggle("menu-btn--active"),menu.classList.toggle("menu--active"),overlay.classList.toggle("overlay--active")});const printIcon=function(e,t,i){return"<div class='icon__delete' >&#10008</div>"},printIconView=function(e,t,i){return"<div class='qrcode-container'><img src='static/images/icons/qrcode.svg' class='qrcode-icon' ></img></div>"};document.getElementById("products-table")&&(table=new Tabulator("#products-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/product_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_product?id="+t.getRow().getData().id)}},{title:"Product name",field:"name",hozAlign:"left"},{title:"Comment",field:"comment"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_product?id="+t.getData().id}})),document.getElementById("users-table")&&(table=new Tabulator("#users-table",{responsiveLayout:"collapse",pagination:"local",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/user_list`,columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_user/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:360},{title:"Email",field:"email",minWidth:160},{title:"Activated",field:"activated",minWidth:160},{title:"Role",field:"role",minWidth:160},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:160}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_user/"+t.getData().id}})),document.getElementById("sub_resellers-table")&&(table=new Tabulator("#sub_resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/sub_reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_sub_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_sub_reseller/"+t.getData().id}})),document.getElementById("resellers-table")&&(table=new Tabulator("#resellers-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/reseller_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_reseller/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_reseller/"+t.getData().id}})),document.getElementById("distributors-table")&&(table=new Tabulator("#distributors-table",{layout:"fitColumns",ajaxURL:window.location.origin+"/api/distributor_list",columns:[{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_distributor/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left"},{title:"Email",field:"email"},{title:"Activated",field:"activated"},{title:"Role",field:"role"},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center"}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_distributor/"+t.getData().id}})),document.getElementById("accounts-table")&&(table=new Tabulator("#accounts-table",{resizableColumns:!1,responsiveLayout:"collapse",pagination:"local",layout:"fitColumns",ajaxURL:window.location.origin+"/api/account_list",ajaxFiltering:!0,paginationSize:20,columns:[{title:"Id",field:"id"},{title:"Ecc id",field:"ecc_id",widthGrow:3},{field:"actions",formatter:printIconView,widthGrow:1,headerSort:!1,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),window.location.href=window.location.origin+"/qrcode/"+t.getRow().getData().id}},{field:"actions",formatter:printIcon,widthGrow:1,hozAlign:"center",headerSort:!1,cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().name)&&(window.location.href=window.location.origin+"/delete_account/"+t.getRow().getData().id)}}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_account/"+t.getData().id}})),document.getElementById("supports-table")&&(table=new Tabulator("#supports-table",{responsiveLayout:"collapse",pagination:"remote",paginationSize:20,layout:"fitColumns",ajaxURL:window.location.origin+`/api/support_list`,paginationDataReceived:{last_page:"max_pages"},columns:[{formatter:"responsiveCollapse",width:30,minWidth:30,align:"center",resizable:!1,headerSort:!1},{title:"Id",field:"id"},{field:"actions",minWidth:50,formatter:printIcon,width:20,hozAlign:"center",cellClick:function(e,t){e.stopPropagation(),confirm("Are you sure you want to delete "+t.getRow().getData().username)&&(window.location.href=window.location.origin+"/delete_support/"+t.getRow().getData().id)}},{title:"Username",field:"username",hozAlign:"left",minWidth:166},{title:"Email",field:"email",minWidth:166},{title:"Activated",field:"activated",minWidth:166},{title:"Role",field:"role",minWidth:166},{title:"Created",field:"created_at",sorter:"date",hozAlign:"center",minWidth:166}],rowClick:function(e,t){window.location.href=window.location.origin+"/edit_support/"+t.getData().id}}));const closeBtn=document.getElementById("close-btn");closeBtn&&closeBtn.addEventListener("click",function(e){document.getElementById("alert").hidden=!0}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".edit__form");if(e){const t=document.querySelector("#gif");t&&e.addEventListener("submit",function(){t.style.visibility="visible",t.style.height="100%",document.querySelectorAll(".btn-container").forEach(function(e){e.remove()})})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJhY2NvdW50LmpzIl0sIm5hbWVzIjpbIm1lbnVCdG4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtZW51Iiwib3ZlcmxheSIsInNob3dGdW5jcyIsImdldEVsZW1lbnRCeUlkIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByaW50SWNvbiIsImNlbGwiLCJmb3JtYXR0ZXJQYXJhbXMiLCJvblJlbmRlcmVkIiwicHJpbnRJY29uVmlldyIsInRhYmxlIiwiVGFidWxhdG9yIiwibGF5b3V0IiwiYWpheFVSTCIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwiY29sdW1ucyIsInRpdGxlIiwiZmllbGQiLCJtaW5XaWR0aCIsImZvcm1hdHRlciIsIndpZHRoIiwiaG96QWxpZ24iLCJjZWxsQ2xpY2siLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiY29uZmlybSIsImdldFJvdyIsImdldERhdGEiLCJuYW1lIiwiaHJlZiIsImlkIiwicm93Q2xpY2siLCJyb3ciLCJyZXNwb25zaXZlTGF5b3V0IiwicGFnaW5hdGlvbiIsInBhZ2luYXRpb25TaXplIiwiYCIsImFwaSIsInVzZXJfbGlzdGAiLCJ1c2VybmFtZSIsInNvcnRlciIsInJlc2l6YWJsZUNvbHVtbnMiLCJhamF4RmlsdGVyaW5nIiwid2lkdGhHcm93IiwiaGVhZGVyU29ydCIsInN1cHBvcnRfbGlzdGAiLCJwYWdpbmF0aW9uRGF0YVJlY2VpdmVkIiwibGFzdF9wYWdlIiwiYWxpZ24iLCJyZXNpemFibGUiLCJjbG9zZUJ0biIsImhpZGRlbiIsImVkaXRGb3JtIiwiZ2lmIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwiaGVpZ2h0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJidG4iLCJyZW1vdmUiXSwibWFwcGluZ3MiOiJBQUFBLE1BQUFBLFFBQUFDLFNBQUFDLGNBQUEsYUFDQUMsS0FBQUYsU0FBQUMsY0FBQSxTQUNBRSxRQUFBSCxTQUFBQyxj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QUksU0FBQSxPQUFBSCxTQUFBLEtBQ0EsQ0FBQUYsTUFBQSxRQUFBQyxNQUFBLFFBQUFDLFNBQUEsS0FDQSxDQUFBRixNQUFBLFlBQUFDLE1BQUEsWUFBQUMsU0FBQSxLQUNBLENBQUFGLE1BQUEsT0FBQUMsTUFBQSxPQUFBQyxTQUFBLEtBQ0EsQ0FDQUYsTUFBQSxVQUNBQyxNQUFBLGFBQ0F1QixPQUFBLE9BQ0FuQixTQUFBLFNBQ0FILFNBQUEsTUFHQWEsU0FBQSxTQUFBUixFQUFBUyxHQUNBcEIsT0FBQUMsU0FBQWdCLEtBQ0FqQixPQUFBQyxTQUFBQyxPQUFBLGlCQUFBa0IsRUFBQUwsVUFBQUcsT0FLQSxNQUFBb0IsU0FBQXhELFNBQUFLLGVBQUEsYUFDQW1ELFVBQ0FBLFNBQUFoRCxpQkFBQSxRQUFBLFNBQUFxQixHQUNBN0IsU0FBQUssZUFBQSxTQUFBb0QsUUFBQSxJQ3RYQXpELFNBQUFRLGlCQUFBLG1CQUFBLFdBQ0EsTUFBQWtELEVBQUExRCxTQUFBQyxjQUFBLGVBQ0EsR0FBQXlELEVBQUEsQ0FDQSxNQUFBQyxFQUFBM0QsU0FBQUMsY0FBQSxRQUNBMEQsR0FDQUQsRUFBQWxELGlCQUFBLFNBQUEsV0FDQW1ELEVBQUFDLE1BQUFDLFdBQUEsVUFDQUYsRUFBQUMsTUFBQUUsT0FBQSxPQUNBOUQsU0FBQStELGlCQUFBLGtCQUFBQyxRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWVudUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idG5cIik7XG5jb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51XCIpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcblxubWVudUJ0biAmJlxuICBtZW51QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwibWVudS1idG4tLWFjdGl2ZVwiKTtcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJtZW51LS1hY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheS0tYWN0aXZlXCIpO1xuICB9KTtcblxuZnVuY3Rpb24gc2hvd0Z1bmNzKCkge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZ1bmNzLWRycFwiKS5jbGFzc0xpc3QudG9nZ2xlKFwic2hvd1wiKTtcbn1cblxub3ZlcmxheSAmJlxuICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgbWVudUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwibWVudS1idG4tLWFjdGl2ZVwiKTtcbiAgICBtZW51LmNsYXNzTGlzdC50b2dnbGUoXCJtZW51LS1hY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwib3ZlcmxheS0tYWN0aXZlXCIpO1xuICB9KTtcbmNvbnN0IHByaW50SWNvbiA9IGZ1bmN0aW9uIChjZWxsLCBmb3JtYXR0ZXJQYXJhbXMsIG9uUmVuZGVyZWQpIHtcbiAgLy9wbGFpbiB0ZXh0IHZhbHVlXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9J2ljb25fX2RlbGV0ZScgPiYjMTAwMDg8L2Rpdj5cIjtcbn07XG5jb25zdCBwcmludEljb25WaWV3ID0gZnVuY3Rpb24gKGNlbGwsIGZvcm1hdHRlclBhcmFtcywgb25SZW5kZXJlZCkge1xuICAvL3BsYWluIHRleHQgdmFsdWVcbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz0ncXJjb2RlLWNvbnRhaW5lcic+PGltZyBzcmM9J3N0YXRpYy9pbWFnZXMvaWNvbnMvcXJjb2RlLnN2ZycgY2xhc3M9J3FyY29kZS1pY29uJyA+PC9pbWc+PC9kaXY+XCI7XG59O1xuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZHVjdHMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI3Byb2R1Y3RzLXRhYmxlXCIsIHtcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvYXBpL3Byb2R1Y3RfbGlzdFwiLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9wcm9kdWN0P2lkPVwiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlByb2R1Y3QgbmFtZVwiLCBmaWVsZDogXCJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJDb21tZW50XCIsIGZpZWxkOiBcImNvbW1lbnRcIiB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfcHJvZHVjdD9pZD1cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXJzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiN1c2Vycy10YWJsZVwiLCB7XG4gICAgcmVzcG9uc2l2ZUxheW91dDogXCJjb2xsYXBzZVwiLFxuICAgIHBhZ2luYXRpb246IFwibG9jYWxcIiwgLy9lbmFibGUgcmVtb3RlIHBhZ2luYXRpb25cbiAgICBwYWdpbmF0aW9uU2l6ZTogMjAsIC8vb3B0aW9uYWwgcGFyYW1ldGVyIHRvIHJlcXVlc3QgYSBjZXJ0YWluIG51bWJlciBvZiByb3dzIHBlciBwYWdlXG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIGAvYXBpL3VzZXJfbGlzdGAsXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS51c2VybmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX3VzZXIvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiVXNlcm5hbWVcIiwgZmllbGQ6IFwidXNlcm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiLCBtaW5XaWR0aDogMzYwIH0sXG4gICAgICB7IHRpdGxlOiBcIkVtYWlsXCIsIGZpZWxkOiBcImVtYWlsXCIsIG1pbldpZHRoOiAxNjAgfSxcbiAgICAgIHsgdGl0bGU6IFwiQWN0aXZhdGVkXCIsIGZpZWxkOiBcImFjdGl2YXRlZFwiLCBtaW5XaWR0aDogMTYwIH0sXG4gICAgICB7IHRpdGxlOiBcIlJvbGVcIiwgZmllbGQ6IFwicm9sZVwiLCBtaW5XaWR0aDogMTYwIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZWRcIixcbiAgICAgICAgZmllbGQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBzb3J0ZXI6IFwiZGF0ZVwiLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgbWluV2lkdGg6IDE2MCxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF91c2VyL1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Yl9yZXNlbGxlcnMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI3N1Yl9yZXNlbGxlcnMtdGFibGVcIiwge1xuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9hcGkvc3ViX3Jlc2VsbGVyX2xpc3RcIixcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnVzZXJuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfc3ViX3Jlc2VsbGVyL1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHRpdGxlOiBcIlVzZXJuYW1lXCIsIGZpZWxkOiBcInVzZXJuYW1lXCIsIGhvekFsaWduOiBcImxlZnRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJFbWFpbFwiLCBmaWVsZDogXCJlbWFpbFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkFjdGl2YXRlZFwiLCBmaWVsZDogXCJhY3RpdmF0ZWRcIiB9LFxuICAgICAgeyB0aXRsZTogXCJSb2xlXCIsIGZpZWxkOiBcInJvbGVcIiB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJDcmVhdGVkXCIsXG4gICAgICAgIGZpZWxkOiBcImNyZWF0ZWRfYXRcIixcbiAgICAgICAgc29ydGVyOiBcImRhdGVcIixcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgcm93Q2xpY2s6IGZ1bmN0aW9uIChlLCByb3cpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL2VkaXRfc3ViX3Jlc2VsbGVyL1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzZWxsZXJzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNyZXNlbGxlcnMtdGFibGVcIiwge1xuICAgIC8vIGhlaWdodDoyMDUsIC8vIHNldCBoZWlnaHQgb2YgdGFibGUgKGluIENTUyBvciBoZXJlKSwgdGhpcyBlbmFibGVzIHRoZSBWaXJ0dWFsIERPTSBhbmQgaW1wcm92ZXMgcmVuZGVyIHNwZWVkIGRyYW1hdGljYWxseSAoY2FuIGJlIGFueSB2YWxpZCBjc3MgaGVpZ2h0IHZhbHVlKVxuICAgIGxheW91dDogXCJmaXRDb2x1bW5zXCIsIC8vZml0IGNvbHVtbnMgdG8gd2lkdGggb2YgdGFibGUgKG9wdGlvbmFsKVxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9hcGkvcmVzZWxsZXJfbGlzdFwiLFxuICAgIGNvbHVtbnM6IFtcbiAgICAgIC8vRGVmaW5lIFRhYmxlIENvbHVtbnNcbiAgICAgIHsgdGl0bGU6IFwiSWRcIiwgZmllbGQ6IFwiaWRcIiB9LFxuICAgICAge1xuICAgICAgICBmaWVsZDogXCJhY3Rpb25zXCIsXG4gICAgICAgIG1pbldpZHRoOiA1MCxcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb24sXG4gICAgICAgIHdpZHRoOiAyMCxcbiAgICAgICAgaG96QWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArXG4gICAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkudXNlcm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9yZXNlbGxlci9cIiArXG4gICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICAgIH0gZWxzZSByZXR1cm47XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJVc2VybmFtZVwiLCBmaWVsZDogXCJ1c2VybmFtZVwiLCBob3pBbGlnbjogXCJsZWZ0XCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiRW1haWxcIiwgZmllbGQ6IFwiZW1haWxcIiB9LFxuICAgICAgeyB0aXRsZTogXCJBY3RpdmF0ZWRcIiwgZmllbGQ6IFwiYWN0aXZhdGVkXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiUm9sZVwiLCBmaWVsZDogXCJyb2xlXCIgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiQ3JlYXRlZFwiLFxuICAgICAgICBmaWVsZDogXCJjcmVhdGVkX2F0XCIsXG4gICAgICAgIHNvcnRlcjogXCJkYXRlXCIsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgfSxcbiAgICBdLFxuICAgIHJvd0NsaWNrOiBmdW5jdGlvbiAoZSwgcm93KSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9lZGl0X3Jlc2VsbGVyL1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRpc3RyaWJ1dG9ycy10YWJsZVwiKSkge1xuICB0YWJsZSA9IG5ldyBUYWJ1bGF0b3IoXCIjZGlzdHJpYnV0b3JzLXRhYmxlXCIsIHtcbiAgICAvLyBoZWlnaHQ6MjA1LCAvLyBzZXQgaGVpZ2h0IG9mIHRhYmxlIChpbiBDU1Mgb3IgaGVyZSksIHRoaXMgZW5hYmxlcyB0aGUgVmlydHVhbCBET00gYW5kIGltcHJvdmVzIHJlbmRlciBzcGVlZCBkcmFtYXRpY2FsbHkgKGNhbiBiZSBhbnkgdmFsaWQgY3NzIGhlaWdodCB2YWx1ZSlcbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLCAvL2ZpdCBjb2x1bW5zIHRvIHdpZHRoIG9mIHRhYmxlIChvcHRpb25hbClcbiAgICBhamF4VVJMOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvYXBpL2Rpc3RyaWJ1dG9yX2xpc3RcIixcbiAgICBjb2x1bW5zOiBbXG4gICAgICAvL0RlZmluZSBUYWJsZSBDb2x1bW5zXG4gICAgICB7IHRpdGxlOiBcIklkXCIsIGZpZWxkOiBcImlkXCIgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBtaW5XaWR0aDogNTAsXG4gICAgICAgIGZvcm1hdHRlcjogcHJpbnRJY29uLFxuICAgICAgICB3aWR0aDogMjAsXG4gICAgICAgIGhvekFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICBjZWxsQ2xpY2s6IGZ1bmN0aW9uIChlLCBjZWxsKSB7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maXJtKFxuICAgICAgICAgICAgICBcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgXCIgK1xuICAgICAgICAgICAgICAgIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLnVzZXJuYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XG4gICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gK1xuICAgICAgICAgICAgICBcIi9kZWxldGVfZGlzdHJpYnV0b3IvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiVXNlcm5hbWVcIiwgZmllbGQ6IFwidXNlcm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkVtYWlsXCIsIGZpZWxkOiBcImVtYWlsXCIgfSxcbiAgICAgIHsgdGl0bGU6IFwiQWN0aXZhdGVkXCIsIGZpZWxkOiBcImFjdGl2YXRlZFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIlJvbGVcIiwgZmllbGQ6IFwicm9sZVwiIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZWRcIixcbiAgICAgICAgZmllbGQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBzb3J0ZXI6IFwiZGF0ZVwiLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9kaXN0cmlidXRvci9cIiArIHJvdy5nZXREYXRhKCkuaWQ7XG4gICAgfSxcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjY291bnRzLXRhYmxlXCIpKSB7XG4gIHRhYmxlID0gbmV3IFRhYnVsYXRvcihcIiNhY2NvdW50cy10YWJsZVwiLCB7XG4gICAgcmVzaXphYmxlQ29sdW1uczogZmFsc2UsXG4gICAgcmVzcG9uc2l2ZUxheW91dDogXCJjb2xsYXBzZVwiLFxuICAgIHBhZ2luYXRpb246IFwibG9jYWxcIiwgLy9lbmFibGUgcmVtb3RlIHBhZ2luYXRpb25cbiAgICBsYXlvdXQ6IFwiZml0Q29sdW1uc1wiLFxuICAgIGFqYXhVUkw6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyBcIi9hcGkvYWNjb3VudF9saXN0XCIsXG4gICAgYWpheEZpbHRlcmluZzogdHJ1ZSxcbiAgICBwYWdpbmF0aW9uU2l6ZTogMjAsIC8vb3B0aW9uYWwgcGFyYW1ldGVyIHRvIHJlcXVlc3QgYSBjZXJ0YWluIG51bWJlciBvZiByb3dzIHBlciBwYWdlXG4gICAgY29sdW1uczogW1xuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7IHRpdGxlOiBcIkVjYyBpZFwiLCBmaWVsZDogXCJlY2NfaWRcIiwgd2lkdGhHcm93OiAzIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgZm9ybWF0dGVyOiBwcmludEljb25WaWV3LFxuICAgICAgICB3aWR0aEdyb3c6IDEsXG4gICAgICAgIGhlYWRlclNvcnQ6IGZhbHNlLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIFwiL3FyY29kZS9cIiArIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLmlkO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgZmllbGQ6IFwiYWN0aW9uc1wiLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGhHcm93OiAxLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgaGVhZGVyU29ydDogZmFsc2UsXG4gICAgICAgIGNlbGxDbGljazogZnVuY3Rpb24gKGUsIGNlbGwpIHtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGNvbmZpcm0oXG4gICAgICAgICAgICAgIFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSBcIiArIGNlbGwuZ2V0Um93KCkuZ2V0RGF0YSgpLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbiArXG4gICAgICAgICAgICAgIFwiL2RlbGV0ZV9hY2NvdW50L1wiICtcbiAgICAgICAgICAgICAgY2VsbC5nZXRSb3coKS5nZXREYXRhKCkuaWQ7XG4gICAgICAgICAgfSBlbHNlIHJldHVybjtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9hY2NvdW50L1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cblxuaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VwcG9ydHMtdGFibGVcIikpIHtcbiAgdGFibGUgPSBuZXcgVGFidWxhdG9yKFwiI3N1cHBvcnRzLXRhYmxlXCIsIHtcbiAgICByZXNwb25zaXZlTGF5b3V0OiBcImNvbGxhcHNlXCIsXG4gICAgcGFnaW5hdGlvbjogXCJyZW1vdGVcIiwgLy9lbmFibGUgcmVtb3RlIHBhZ2luYXRpb25cbiAgICBwYWdpbmF0aW9uU2l6ZTogMjAsIC8vb3B0aW9uYWwgcGFyYW1ldGVyIHRvIHJlcXVlc3QgYSBjZXJ0YWluIG51bWJlciBvZiByb3dzIHBlciBwYWdlXG4gICAgLy8gaGVpZ2h0OjIwNSwgLy8gc2V0IGhlaWdodCBvZiB0YWJsZSAoaW4gQ1NTIG9yIGhlcmUpLCB0aGlzIGVuYWJsZXMgdGhlIFZpcnR1YWwgRE9NIGFuZCBpbXByb3ZlcyByZW5kZXIgc3BlZWQgZHJhbWF0aWNhbGx5IChjYW4gYmUgYW55IHZhbGlkIGNzcyBoZWlnaHQgdmFsdWUpXG4gICAgbGF5b3V0OiBcImZpdENvbHVtbnNcIiwgLy9maXQgY29sdW1ucyB0byB3aWR0aCBvZiB0YWJsZSAob3B0aW9uYWwpXG4gICAgYWpheFVSTDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArIGAvYXBpL3N1cHBvcnRfbGlzdGAsXG4gICAgcGFnaW5hdGlvbkRhdGFSZWNlaXZlZDoge1xuICAgICAgbGFzdF9wYWdlOiBcIm1heF9wYWdlc1wiLCAvL2NoYW5nZSBsYXN0X3BhZ2UgcGFyYW1ldGVyIG5hbWUgdG8gXCJtYXhfcGFnZXNcIlxuICAgIH0sXG4gICAgY29sdW1uczogW1xuICAgICAgLy9EZWZpbmUgVGFibGUgQ29sdW1uc1xuICAgICAge1xuICAgICAgICBmb3JtYXR0ZXI6IFwicmVzcG9uc2l2ZUNvbGxhcHNlXCIsXG4gICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgbWluV2lkdGg6IDMwLFxuICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgICAgaGVhZGVyU29ydDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgeyB0aXRsZTogXCJJZFwiLCBmaWVsZDogXCJpZFwiIH0sXG4gICAgICB7XG4gICAgICAgIGZpZWxkOiBcImFjdGlvbnNcIixcbiAgICAgICAgbWluV2lkdGg6IDUwLFxuICAgICAgICBmb3JtYXR0ZXI6IHByaW50SWNvbixcbiAgICAgICAgd2lkdGg6IDIwLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgY2VsbENsaWNrOiBmdW5jdGlvbiAoZSwgY2VsbCkge1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlybShcbiAgICAgICAgICAgICAgXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIFwiICtcbiAgICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS51c2VybmFtZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICtcbiAgICAgICAgICAgICAgXCIvZGVsZXRlX3N1cHBvcnQvXCIgK1xuICAgICAgICAgICAgICBjZWxsLmdldFJvdygpLmdldERhdGEoKS5pZDtcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHsgdGl0bGU6IFwiVXNlcm5hbWVcIiwgZmllbGQ6IFwidXNlcm5hbWVcIiwgaG96QWxpZ246IFwibGVmdFwiLCBtaW5XaWR0aDogMTY2IH0sXG4gICAgICB7IHRpdGxlOiBcIkVtYWlsXCIsIGZpZWxkOiBcImVtYWlsXCIsIG1pbldpZHRoOiAxNjYgfSxcbiAgICAgIHsgdGl0bGU6IFwiQWN0aXZhdGVkXCIsIGZpZWxkOiBcImFjdGl2YXRlZFwiLCBtaW5XaWR0aDogMTY2IH0sXG4gICAgICB7IHRpdGxlOiBcIlJvbGVcIiwgZmllbGQ6IFwicm9sZVwiLCBtaW5XaWR0aDogMTY2IH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIkNyZWF0ZWRcIixcbiAgICAgICAgZmllbGQ6IFwiY3JlYXRlZF9hdFwiLFxuICAgICAgICBzb3J0ZXI6IFwiZGF0ZVwiLFxuICAgICAgICBob3pBbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgbWluV2lkdGg6IDE2NixcbiAgICAgIH0sXG4gICAgXSxcbiAgICByb3dDbGljazogZnVuY3Rpb24gKGUsIHJvdykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxuICAgICAgICB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgXCIvZWRpdF9zdXBwb3J0L1wiICsgcm93LmdldERhdGEoKS5pZDtcbiAgICB9LFxuICB9KTtcbn1cblxuY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNsb3NlLWJ0blwiKTtcbmlmIChjbG9zZUJ0bikge1xuICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsZXJ0XCIpLmhpZGRlbiA9IHRydWU7XG4gIH0pO1xufVxuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgZWRpdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdF9fZm9ybScpO1xuICBpZiAoZWRpdEZvcm0pIHtcbiAgICBjb25zdCBnaWYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2lmJyk7XG4gICAgaWYoZ2lmKSB7XG4gICAgICBlZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbigpe1xuICAgICAgICBnaWYuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgZ2lmLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5idG4tY29udGFpbmVyXCIpLmZvckVhY2goZnVuY3Rpb24oYnRuKSB7XG4gICAgICAgICAgYnRuLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufSk7XG4iXX0=
